<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prüfung B2 - German Quiz Master</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
  <div class="reactive-bg"></div>

  <!-- Navbar -->
  <nav class="navbar fade-in">
    <a href="home.html" class="logo">
      <i class="fas fa-earth-europe" style="color: var(--primary-color); margin-right: 10px;"></i>
      Vorbereitung
    </a>
    <div class="menu-container">
      <div class="nav-segment">
        <button id="menuTrigger" class="btn" style="padding: 8px 14px;"><i class="fas fa-bars"></i></button>
      </div>
      <div id="menuCard" class="menu-card fade-in" style="animation-delay: 0.05s;"></div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="dashboard-container fade-in" style="animation-delay: 0.2s;">
    <div class="hero">
      <a href="home.html" class="back"><i class="fas fa-arrow-left"></i> Zurück</a>
      <div class="title">Prüfung B2</div>
      <div class="subtitle">Quiz Practice</div>
      <div class="hero-search">
        <input id="heroSearchB2" class="search-input" type="text" placeholder="Suchen..."/>
      </div>
    </div>
    <div class="tabs">
      <div class="tab active" data-target="tab-b2-lesen">Lesen</div>
      <div class="tab" data-target="tab-b2-gram">Sprachbausteine</div>
      <div class="tab" data-target="tab-b2-hoeren">Hören</div>
      <div class="tab" data-target="tab-b2-schreiben">Schreiben</div>
    </div>
    <div id="tab-b2-lesen" class="tab-content active">
      <div class="sub-tabs">
        <div class="sub-tab active" data-target="lesen-b2-part1">Part 1</div>
        <div class="sub-tab" data-target="lesen-b2-part2">Part 2</div>
        <div class="sub-tab" data-target="lesen-b2-part3">Part 3</div>
      </div>

    <!-- Lesen Teil 1 -->
    <div class="section-card sub-content active" id="lesen-b2-part1">
      <div class="section-title">
        <i class="fas fa-book-open" style="color: var(--primary-color);"></i>
        Lesen Teil 1
      </div>
      <div class="quiz-grid">
        <a class="quiz-btn" href="/quiz/11.html">Umwelt</a>
        <a class="quiz-btn" href="/quiz/12.html">Impfung</a>
        <a class="quiz-btn" href="/quiz/16.html">Kinderhandy</a>
        <a class="quiz-btn" href="/quiz/17.html">Drogen</a>
        <a class="quiz-btn" href="/quiz/18.html">Tanzkurs</a>
        <a class="quiz-btn" href="/quiz/25.html">Limonade</a>
        <a class="quiz-btn" href="/quiz/26.html">Grundschule</a>
        <a class="quiz-btn" href="/quiz/27.html">Insekten</a>
        <a class="quiz-btn" href="/quiz/28.html">Österreich</a>
        <a class="quiz-btn" href="/quiz/39.html">Jugend forscht</a>
        <a class="quiz-btn" href="/quiz/40.html">Sport ist Gesund</a>
        <a class="quiz-btn" href="/quiz/41.html">Inseln</a>
        <a class="quiz-btn" href="/quiz/42.html">In den Alpen</a>
        <a class="quiz-btn" href="/quiz/143.html">In den Alpen 2</a>
        <a class="quiz-btn" href="/quiz/43.html">Kartoffel</a>
        <a class="quiz-btn" href="/quiz/59.html">Bilder</a>
        <a class="quiz-btn" href="/quiz/70.html">Licht</a>
        <a class="quiz-btn" href="/quiz/71.html">Spielen</a>
        <a class="quiz-btn" href="/quiz/72.html">Programmieren</a>
        <a class="quiz-btn" href="/quiz/73.html">Trampoline</a>
        <a class="quiz-btn" href="/quiz/74.html">Benzin</a>
        <a class="quiz-btn" href="/quiz/64.html">Kaffee</a>
        <a class="quiz-btn" href="/quiz/84.html">Bonbons</a>
        <a class="quiz-btn" href="/quiz/86.html">Geld</a>
        <a class="quiz-btn" href="/quiz/85.html">Auf dem Weg</a>
        <a class="quiz-btn" href="/quiz/98.html">Schlafzug</a>
        <a class="quiz-btn" href="/quiz/101.html">Keine Zeit</a>
        <a class="quiz-btn" href="/quiz/136.html">Licht (NEUE)</a>
      </div>
    </div>

    <!-- Lesen Teil 2 -->
    <div class="section-card sub-content" id="lesen-b2-part2">
      <div class="section-title">
        <i class="fas fa-book-reader" style="color: var(--secondary-color);"></i>
        Lesen Teil 2
      </div>
      <div class="quiz-grid">
        <a class="quiz-btn" href="/quiz/4.html">Puppenmacher</a>
        <a class="quiz-btn" href="/quiz/5.html">Österreich</a>
        <a class="quiz-btn" href="/quiz/6.html">Parkuhren</a>
        <a class="quiz-btn" href="/quiz/7.html">Traumfrau</a>
        <a class="quiz-btn" href="/quiz/13.html">Kaufentscheidungen</a>
        <a class="quiz-btn" href="/quiz/15.html">Millionäre</a>
        <a class="quiz-btn" href="/quiz/19.html">Gehirn</a>
        <a class="quiz-btn" href="/quiz/20.html">Verpackungen</a>
        <a class="quiz-btn" href="/quiz/21.html">Kreditkarten</a>
        <a class="quiz-btn" href="/quiz/22.html">Krista die Kühe</a>
        <a class="quiz-btn" href="/quiz/23.html">Ernährung</a>
        <a class="quiz-btn" href="/quiz/24.html">Kaffee</a>
        <a class="quiz-btn" href="/quiz/134.html">Kaffee 2</a>
        <a class="quiz-btn" href="/quiz/29.html">Großraumbüros</a>
        <a class="quiz-btn" href="/quiz/44.html">Familie</a>
        <a class="quiz-btn" href="/quiz/45.html">Babys</a>
        <a class="quiz-btn" href="/quiz/46.html">Karneval von Unna</a>
        <a class="quiz-btn" href="/quiz/47.html">Mehrsprachige</a>
        <a class="quiz-btn" href="/quiz/60.html">Gesundes Essen</a>
        <a class="quiz-btn" href="/quiz/61.html">Dienstmädchen</a>
        <a class="quiz-btn" href="/quiz/75.html">Reitergruppe</a>
        <a class="quiz-btn" href="/quiz/77.html">Brigitte Vollmer</a>
        <a class="quiz-btn" href="/quiz/79.html">Nachtzug</a>
        <a class="quiz-btn" href="/quiz/102.html">Die ganze Welt</a>
        <a class="quiz-btn" href="/quiz/123.html">Kellner</a>
        <a class="quiz-btn" href="/quiz/131.html">Weniger Euro</a>
      </div>
    </div>

    <!-- Lesen Teil 3 -->
    <div class="section-card sub-content" id="lesen-b2-part3">
      <div class="section-title">
        <i class="fas fa-newspaper" style="color: var(--primary-color);"></i>
        Lesen Teil 3
      </div>
      <div class="quiz-grid">
        <a class="quiz-btn" href="/quiz/62.html">Fernsehprogramm</a>
        <a class="quiz-btn" href="/quiz/63.html">Sport ist Gesund</a>
        <a class="quiz-btn" href="/quiz/65.html">Kellner</a>
        <a class="quiz-btn" href="/quiz/66.html">Schwägerin</a>
        <a class="quiz-btn" href="/quiz/145.html">Schwägerin(das)</a>
        <a class="quiz-btn" href="/quiz/67.html">Dokumentarfilm</a>
        <a class="quiz-btn" href="/quiz/68.html">Wein und Insekten</a>
        <a class="quiz-btn" href="/quiz/69.html">Grundschule</a>
        <a class="quiz-btn" href="/quiz/141.html">Kein Zeit</a>
        <a class="quiz-btn" href="/quiz/76.html">Kein Zeit 2</a>
        <a class="quiz-btn" href="/quiz/78.html">Sport</a>
        <a class="quiz-btn" href="/quiz/80.html">Gärten</a>
        <a class="quiz-btn" href="/quiz/81.html">Apotheker</a>
        <a class="quiz-btn" href="/quiz/82.html">Urlaub</a>
        <a class="quiz-btn" href="/quiz/83.html">Anwalt</a>
        <a class="quiz-btn" href="/quiz/87.html">Der Hund</a>
        <a class="quiz-btn" href="/quiz/88.html">Musik</a>
        <a class="quiz-btn" href="/quiz/89.html">Haushalt</a>
        <a class="quiz-btn" href="/quiz/90.html">Musikinstrumente</a>
        <a class="quiz-btn" href="/quiz/108.html">Schiffsreise</a>
        <a class="quiz-btn" href="/quiz/109.html">Ausflug</a>
        <a class="quiz-btn" href="/quiz/110.html">Schwägerin Gesund</a>
        <a class="quiz-btn" href="/quiz/111.html">Übersetzerin</a>
        <a class="quiz-btn" href="/quiz/124.html">Tierdokumentationen</a>
        <a class="quiz-btn" href="/quiz/132.html">Schlafzug</a>
        <a class="quiz-btn" href="/quiz/140.html">Bonbons</a>
      </div>
    </div>

    </div>
    <div id="tab-b2-gram" class="tab-content">
    <!-- Sprachbausteine Teil 1 -->
    <div class="section-card">
      <div class="section-title">
        <i class="fas fa-puzzle-piece" style="color: var(--secondary-color);"></i>
        Sprachbausteine Teil 1
      </div>
      <div class="quiz-grid">
        <a class="quiz-btn" href="/quiz/30.html">Herr Martini</a>
        <a class="quiz-btn" href="/quiz/31.html">Judith oder Lina</a>
        <a class="quiz-btn" href="/quiz/32.html">Igor</a>
        <a class="quiz-btn" href="/quiz/33.html">Maria</a>
        <a class="quiz-btn" href="/quiz/34.html">Ida</a>
        <a class="quiz-btn" href="/quiz/35.html">Andrea</a>
        <a class="quiz-btn" href="/quiz/91.html">Andrea 2</a>
        <a class="quiz-btn" href="/quiz/36.html">Autorinnen und Autoren</a>
        <a class="quiz-btn" href="/quiz/37.html">Geissler oder Dippold</a>
        <a class="quiz-btn" href="/quiz/38.html">Herr Dr. Dobromil</a>
        <a class="quiz-btn" href="/quiz/92.html">Frau Szabo</a>
        <a class="quiz-btn" href="/quiz/144.html">Frau Szabo 2</a>
        <a class="quiz-btn" href="/quiz/93.html">Corinna</a>
        <a class="quiz-btn" href="/quiz/94.html">Justus oder Juhannas</a>
        <a class="quiz-btn" href="/quiz/95.html">Justus oder Juhannas 2</a>
        <a class="quiz-btn" href="/quiz/96.html">Ferdinand, Phillip, Christopher</a>
        <a class="quiz-btn" href="/quiz/97.html">Liebe Paola</a>
        <a class="quiz-btn" href="/quiz/100.html">Liebe Julian</a>
        <a class="quiz-btn" href="/quiz/103.html">Liebe Lara</a>
        <a class="quiz-btn" href="/quiz/105.html">Lieber David</a>
        <a class="quiz-btn" href="/quiz/106.html">Liebe Maria, Lieber Timur</a>
        <a class="quiz-btn" href="/quiz/114.html">Liebe Vanessa</a>
        <a class="quiz-btn" href="/quiz/115.html">Frau Goronsksa</a>
        <a class="quiz-btn" href="/quiz/118.html">Liebe Karin</a>
        <a class="quiz-btn" href="/quiz/119.html">Liebe Jutta</a>
        <a class="quiz-btn" href="/quiz/126.html">Liebe Meike</a>
        <a class="quiz-btn" href="/quiz/128.html">Liebe Leon</a>
        <a class="quiz-btn" href="/quiz/130.html">Liebe Clara</a>
        <a class="quiz-btn" href="/quiz/133.html">Lieber Thomas</a>
        <a class="quiz-btn" href="/quiz/135.html">Dr. Moosberger</a>
        <a class="quiz-btn" href="/quiz/137.html">Lina & Florian</a>
        <a class="quiz-btn" href="/quiz/138.html">Liebe Agnieszka</a>
        <a class="quiz-btn" href="/quiz/142.html">Jens</a>
      </div>
    </div>

    <!-- Sprachbausteine Teil 2 -->
    <div class="section-card">
      <div class="section-title">
        <i class="fas fa-shapes" style="color: var(--primary-color);"></i>
        Sprachbausteine Teil 2
      </div>
      <div class="quiz-grid">
        <a class="quiz-btn" href="/quiz/1.html">Theater für Kinder und Jugendliche</a>
        <a class="quiz-btn" href="/quiz/2.html">Im Restaurant</a>
        <a class="quiz-btn" href="/quiz/3.html">Das Fahrrad: ernsthafte Konkurrenz fürs Auto?</a>
        <a class="quiz-btn" href="/quiz/14.html">Haustieren</a>
        <a class="quiz-btn" href="/quiz/48.html">Liebesgrüße aus der Kühltruhe</a>
        <a class="quiz-btn" href="/quiz/49.html">Braunbären</a>
        <a class="quiz-btn" href="/quiz/50.html">Ausbildung</a>
        <a class="quiz-btn" href="/quiz/51.html">Skipiste</a>
        <a class="quiz-btn" href="/quiz/52.html">Jugend diskutiert</a>
        <a class="quiz-btn" href="/quiz/53.html">Manipulierte Bilder</a>
        <a class="quiz-btn" href="/quiz/54.html">Haustieren</a>
        <a class="quiz-btn" href="/quiz/55.html">Schwarzarbeit</a>
        <a class="quiz-btn" href="/quiz/56.html">Handschrift</a>
        <a class="quiz-btn" href="/quiz/57.html">Schulweg</a>
        <a class="quiz-btn" href="/quiz/58.html">Höflichkeit</a>
        <a class="quiz-btn" href="/quiz/99.html">Obst und Gemüse</a>
        <a class="quiz-btn" href="/quiz/104.html">TV-Bilder</a>
        <a class="quiz-btn" href="/quiz/107.html">Freund des Menschen</a>
        <a class="quiz-btn" href="/quiz/112.html">BIO</a>
        <a class="quiz-btn" href="/quiz/113.html">Erfolg</a>
        <a class="quiz-btn" href="/quiz/116.html">Deutschland</a>
        <a class="quiz-btn" href="/quiz/117.html">Joggen</a>
        <a class="quiz-btn" href="/quiz/120.html">Maßgeschneidert</a>
        <a class="quiz-btn" href="/quiz/121.html">Der Hund</a>
        <a class="quiz-btn" href="/quiz/122.html">Online—Sprachkurse</a>
        <a class="quiz-btn" href="/quiz/125.html">Fische</a>
        <a class="quiz-btn" href="/quiz/127.html">Man(n) kocht selbst</a>
        <a class="quiz-btn" href="/quiz/129.html">Schönschrift</a>
        <a class="quiz-btn" href="/quiz/139.html">Kaffee und Kuchen</a>
      </div>
    </div>

    </div>
    <div id="tab-b2-hoeren" class="tab-content">
    <!-- Hören -->
    <div class="section-card">
      <div class="section-title">
        <i class="fas fa-headphones" style="color: var(--secondary-color);"></i>
        Hören
      </div>
      <div class="quiz-grid">
        <a class="quiz-btn" href="/quiz/8.html">Teil 1</a>
        <a class="quiz-btn" href="/quiz/9.html">Teil 2</a>
        <a class="quiz-btn" href="/quiz/10.html">Teil 3</a>
      </div>
    </div>
    <div id="tab-b2-schreiben" class="tab-content">
      <div class="section-card">
        <div class="section-title">
          <i class="fas fa-pen-nib" style="color: var(--primary-color);"></i>
          Aufgabe 1 – Formeller Brief
        </div>
        <div style="display: grid; gap: 16px;">
          <div style="color: var(--text-light); font-weight: 600;">Schreiben Sie einen formellen Brief (ca. 180–220 Wörter).</div>
          <div style="background: var(--light-color); border-radius: 12px; padding: 14px; color: var(--text-color);">Thema: Kursleistungen entsprachen nicht der Beschreibung. Bitten Sie um Stellungnahme und teilweise Rückerstattung.</div>
          <textarea id="write1" style="width: 100%; min-height: 220px; border-radius: 12px; padding: 14px; font-size: 1rem;"></textarea>
          <div style="display:flex; align-items:center; justify-content:space-between;">
            <div id="write1Count" style="font-weight:700; color: var(--text-light);">0 Wörter</div>
            <div style="display:flex; gap:8px;">
              <button id="write1Save" class="btn btn-secondary" style="padding:8px 16px;">Speichern</button>
              <button id="write1Copy" class="btn" style="padding:8px 16px;">Kopieren</button>
              <button id="write1Clear" class="btn btn-danger" style="padding:8px 16px;">Leeren</button>
            </div>
          </div>
        </div>
      </div>
      <div class="section-card">
        <div class="section-title">
          <i class="fas fa-feather-pointed" style="color: var(--secondary-color);"></i>
          Aufgabe 2 – Stellungnahme
        </div>
        <div style="display: grid; gap: 16px;">
          <div style="color: var(--text-light); font-weight: 600;">Schreiben Sie eine Stellungnahme (ca. 180–220 Wörter).</div>
          <div style="background: var(--light-color); border-radius: 12px; padding: 14px; color: var(--text-color);">Thema: Sollten Smartphones an Schulen vollständig verboten werden?</div>
          <textarea id="write2" style="width: 100%; min-height: 220px; border-radius: 12px; padding: 14px; font-size: 1rem;"></textarea>
          <div style="display:flex; align-items:center; justify-content:space-between;">
            <div id="write2Count" style="font-weight:700; color: var(--text-light);">0 Wörter</div>
            <div style="display:flex; gap:8px;">
              <button id="write2Save" class="btn btn-secondary" style="padding:8px 16px;">Speichern</button>
              <button id="write2Copy" class="btn" style="padding:8px 16px;">Kopieren</button>
              <button id="write2Clear" class="btn btn-danger" style="padding:8px 16px;">Leeren</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Warning Box -->
  <div id="warningBox">
    Inaktivität erkannt! Automatische Abmeldung in <span id="countdown">30</span> Sekunden.
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p style="opacity: 0.6;">&copy; 2026 German Quiz Master</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase-client.js"></script>
  <script src="js/auth.js"></script>
  <script>
    // Logout function
    function logout() {
      fetch("/logout", { method: "POST" })
        .then(() => window.location.href = "/");
    }

    let pingTimeout;
    let logoutTimer;
    let warningTimer;
    let countdownTimer;
    let lastPing = 0;

    const INACTIVITY_LIMIT = 15 * 60 * 1000; // 15 minutes
    const WARNING_BEFORE_LOGOUT = 30 * 1000; // 30 seconds
    const warningBox = document.getElementById("warningBox");
    const countdownEl = document.getElementById("countdown");

    function sendPing() {
      const now = Date.now();
      if (now - lastPing < 10000) return;
      lastPing = now;
      fetch("/ping").catch(() => { });
    }

    function resetTimers() {
      clearTimeout(pingTimeout);
      clearTimeout(logoutTimer);
      clearTimeout(warningTimer);
      clearInterval(countdownTimer);

      warningBox.style.display = "none";

      sendPing();
      pingTimeout = setTimeout(sendPing, 60 * 1000);

      // Show warning 30s before logout
      warningTimer = setTimeout(() => {
        let remaining = 30;
        warningBox.style.display = "block";
        countdownEl.textContent = remaining;

        countdownTimer = setInterval(() => {
          remaining--;
          countdownEl.textContent = remaining;
          if (remaining <= 0) {
            clearInterval(countdownTimer);
          }
        }, 1000);
      }, INACTIVITY_LIMIT - WARNING_BEFORE_LOGOUT);

      // Auto logout
      logoutTimer = setTimeout(() => {
        logout();
      }, INACTIVITY_LIMIT);
    }

    // Events
    ["mousemove", "keydown", "scroll", "click", "touchstart"].forEach(evt => {
      document.addEventListener(evt, resetTimers);
    });

    window.addEventListener("pageshow", sendPing);
    window.addEventListener("beforeunload", sendPing);

    resetTimers();
    
    document.addEventListener('DOMContentLoaded', function () {
      var tabs = document.querySelectorAll('.tabs .tab');
      var panels = document.querySelectorAll('.tab-content');
      tabs.forEach(function(tab){
        tab.addEventListener('click', function(){
          var id = tab.getAttribute('data-target');
          panels.forEach(function(p){ p.classList.toggle('active', p.id === id); });
          tabs.forEach(function(t){ t.classList.toggle('active', t === tab); });
        });
      });
      var lesen = document.getElementById('tab-b2-lesen');
      if (lesen) {
        var subTabs = lesen.querySelectorAll('.sub-tab');
        var subs = lesen.querySelectorAll('.sub-content');
        subTabs.forEach(function(st){
          st.addEventListener('click', function(){
            var id = st.getAttribute('data-target');
            subs.forEach(function(c){ c.classList.toggle('active', c.id === id); });
            subTabs.forEach(function(s){ s.classList.toggle('active', s === st); });
          });
        });
        
      }
      var heroSearch = document.getElementById('heroSearchB2');
      if (heroSearch) {
        heroSearch.addEventListener('input', function(){
          var q = heroSearch.value.toLowerCase();
          var activeTab = document.querySelector('.tab-content.active');
          if (!activeTab) return;
          var scope = activeTab.querySelector('.sub-content.active') || activeTab;
          scope.querySelectorAll('.quiz-btn').forEach(function(btn){
            var t = btn.textContent.toLowerCase();
            btn.style.display = t.indexOf(q) !== -1 ? '' : 'none';
          });
        });
      }
      function updateCount(id, counterId, storageKey) {
        var ta = document.getElementById(id);
        var counter = document.getElementById(counterId);
        if (!ta || !counter) return;
        var saved = localStorage.getItem(storageKey);
        if (saved) { ta.value = saved; }
        var calc = function(){
          var text = ta.value.trim();
          var count = text ? text.split(/\s+/).filter(Boolean).length : 0;
          counter.textContent = count + ' Wörter';
          localStorage.setItem(storageKey, ta.value);
        };
        ta.addEventListener('input', calc);
        calc();
        var saveBtn = document.getElementById(id + 'Save');
        var copyBtn = document.getElementById(id + 'Copy');
        var clearBtn = document.getElementById(id + 'Clear');
        if (saveBtn) saveBtn.addEventListener('click', function(){ localStorage.setItem(storageKey, ta.value); });
        if (copyBtn) copyBtn.addEventListener('click', function(){ navigator.clipboard.writeText(ta.value); });
        if (clearBtn) clearBtn.addEventListener('click', function(){ ta.value=''; calc(); });
      }
      updateCount('write1','write1Count','b2_write1');
      updateCount('write2','write2Count','b2_write2');
    });
    (async function () {
      var menu = document.getElementById('menuCard');
      var user = await Auth.getCurrentUser();
      if (!menu) return;
      if (user) {
        menu.innerHTML = '<div class="menu-header"><span>Menü</span><span>'+(user.name||'Benutzer')+'</span></div>'
          + '<div class="menu-row">'
          + '<button id="theme-toggle" class="menu-item" style="padding: 10px 14px;"></button>'
          + '<button onclick="Auth.logout()" class="menu-item primary">Abmelden</button>'
          + '</div>';
      } else {
        menu.innerHTML = '<div class="menu-header"><span>Menü</span><span>Gast</span></div>'
          + '<div class="menu-row">'
          + '<a href="login.html" class="menu-item primary">Anmelden</a>'
          + '<a href="register.html" class="menu-item">Registrieren</a>'
          + '</div>'
          + '<div class="menu-row">'
          + '<button id="theme-toggle" class="menu-item" style="padding: 10px 14px;"></button>'
          + '</div>';
      }
      if (document.getElementById('theme-toggle')) {
        updateThemeToggleIcon();
        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
      }
    })();
    (function () {
      var trigger = document.getElementById('menuTrigger');
      var card = document.getElementById('menuCard');
      function toggleMenu() {
        if (!card) return;
        var show = !(card.style.display === 'block');
        card.style.display = show ? 'block' : 'none';
        card.classList.toggle('open', show);
      }
      function closeMenu(e) {
        if (!card) return;
        var within = card.contains(e.target) || trigger.contains(e.target);
        if (!within) { card.style.display = 'none'; card.classList.remove('open'); }
      }
      if (trigger) trigger.addEventListener('click', toggleMenu);
      document.addEventListener('click', closeMenu);
    })();
  </script>
</body>

</html>
