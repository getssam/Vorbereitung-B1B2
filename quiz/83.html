<html lang="de"><head>
<meta charset="utf-8"/>
<title>Lesen Teil 3</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Font Awesome for Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
    :root {
      --primary-color: #3498db; /* A slightly more vibrant blue */
      --secondary-color: #2ecc71; /* Green for success */
      --danger-color: #e74c3c; /* Red for error */
      --light-bg: #ecf0f1;
      --dark-text: #2c3e50;
      --light-text: #ffffff;
      --border-radius: 10px;
      --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      --box-shadow-hover: 0 8px 20px rgba(0,0,0,0.15);
    }

    body {
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #e5e5e5; background-image: radial-gradient(at 0% 0%, hsla(328, 76%, 65%, 0.7) 0px, transparent 50%), radial-gradient(at 0% 40%, hsla(15, 88%, 65%, 0.5) 0px, transparent 50%); background-attachment: fixed;
      color: var(--dark-text);
      animation: fadeInPage 0.8s ease-out;
      min-height: 100vh;
      box-sizing: border-box;
    }

    @keyframes fadeInPage {
      from { opacity: 0; transform: translateY(-15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      background-color: var(--primary-color);
      color: var(--light-text);
      padding: 20px 25px;
      margin-bottom: 25px;
      border-radius: var(--border-radius);
      text-align: center;
      font-size: 26px;
      font-weight: 600;
      box-shadow: var(--box-shadow);
      letter-spacing: 0.5px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    @media(min-width: 768px) {
      .container {
        flex-direction: row;
      }
    }

    .left-column, .right-column {
      flex: 1;
      min-width: 300px;
    }

    .quiz-scroll-container, .right-column-content {
      background-color: var(--light-text);
      border-radius: var(--border-radius);
      padding: 15px;
      box-shadow: var(--box-shadow);
      max-height: 60vh; /* Adjusted for better viewport fit */
      overflow-y: auto;
      /* Custom scrollbar styling */
      scrollbar-width: thin;
      scrollbar-color: var(--primary-color) var(--light-bg);
    }

    /* Style for .right-column-content when being dragged over */
    .right-column-content.drag-over {
        background-color: #eef8ff; /* Same as .drop-target.drag-over */
        border: 2px dashed var(--primary-color); /* Add a border to indicate it's a drop zone */
    }


    .quiz-scroll-container::-webkit-scrollbar,
    .right-column-content::-webkit-scrollbar {
      width: 8px;
    }
    .quiz-scroll-container::-webkit-scrollbar-track,
    .right-column-content::-webkit-scrollbar-track {
      background: var(--light-bg);
      border-radius: var(--border-radius);
    }
    .quiz-scroll-container::-webkit-scrollbar-thumb,
    .right-column-content::-webkit-scrollbar-thumb {
      background-color: var(--primary-color);
      border-radius: var(--border-radius);
      border: 2px solid var(--light-bg);
    }


    .question-box {
      border: 1px solid #bdc3c7;
      border-left: 5px solid var(--primary-color);
      border-radius: var(--border-radius);
      margin-bottom: 20px;
      padding: 15px;
      background-color: #fdfdfd; /* Slightly off-white */
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .question-box:hover {
      transform: translateY(-3px);
      box-shadow: var(--box-shadow-hover);
    }
    .question-text {
      font-size: 0.9em;
      color: #7f8c8d;
      margin-top: 10px;
    }

    .drop-target {
      background-color: #f9f9f9;
      padding: 12px;
      margin-bottom: 10px; /* Space between drop target and question text */
      border: 2px dashed #cccccc;
      min-height: 45px;
      border-radius: 8px;
      text-align: center;
      transition: background-color 0.3s, border-color 0.3s;
      display: flex; /* To center placeholder and dropped item */
      align-items: center;
      justify-content: center;
      position: relative; /* For feedback icons */
    }
    .drop-target.empty-drop-target::before {
      content: "Hier Antwort ablegen";
      color: #aaa;
      font-style: italic;
      font-size: 0.9em;
    }
    .drop-target:not(.empty-drop-target)::before {
      content: ""; /* Clear placeholder when not empty */
    }

    .drop-target:hover, .drop-target.drag-over {
      background-color: #eef8ff;
      border-color: var(--primary-color);
    }

    .draggable {
      background-color: #e0e0e0;
      color: var(--dark-text);
      margin: 10px 0;
      padding: 12px 15px;
      border-radius: 8px;
      cursor: grab;
      display: flex;
      align-items: center;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      user-select: none;
      font-size: 0.95em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .draggable:hover {
      background-color: #d0d0d0;
      transform: translateX(3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .draggable.selected {
      outline: 2px solid var(--primary-color);
      box-shadow: 0 0 0 3px var(--primary-color_alpha, rgba(52, 152, 219, 0.3));
      background-color: #cce7ff;
    }
    .draggable.dragging {
      opacity: 0.6;
      transform: scale(0.95);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      cursor: grabbing;
    }

    /* Feedback styling for drop targets */
    .drop-target.correct {
      background-color: #e8f5e9; /* Light green */
      border: 2px solid var(--secondary-color) !important;
    }
    .drop-target.correct::after {
      content: "\f00c"; /* Font Awesome check icon */
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      color: var(--secondary-color);
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2em;
    }

    .drop-target.incorrect {
      background-color: #ffebee; /* Light red */
      border: 2px solid var(--danger-color) !important;
    }
    .drop-target.incorrect::after {
      content: "\f00d"; /* Font Awesome times icon */
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      color: var(--danger-color);
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2em;
    }
    /* Ensure dropped draggable text is visible over feedback */
    .drop-target .draggable {
      background-color: var(--primary-color);
      color: var(--light-text);
      width: calc(100% - 30px); /* Adjust width to make space for icon */
      padding-right: 35px; /* Space for the potential icon */
      box-sizing: border-box;
    }
    .drop-target.correct .draggable { background-color: var(--secondary-color); }
    .drop-target.incorrect .draggable { background-color: var(--danger-color); }


    .wrong-flag {
      margin-right: 10px;
      accent-color: var(--danger-color);
      transform: scale(1.2);
      cursor: pointer;
    }

    .button-container {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .quiz-button {
      padding: 12px 25px;
      border: none;
      background-color: var(--primary-color);
      color: white;
      font-size: 16px;
      font-weight: 500;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: var(--box-shadow);
    }
    .quiz-button:hover {
      background-color: #2980b9; /* Darker shade of primary */
      transform: translateY(-2px);
      box-shadow: var(--box-shadow-hover);
    }
    .quiz-button:active {
      transform: translateY(0px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .quiz-button.secondary {
      background-color: #7f8c8d; /* A neutral secondary color */
    }
    .quiz-button.secondary:hover {
      background-color: #6c7a89;
    }

    #result {
      text-align: center;
      margin-top: 25px;
      padding: 15px;
      font-size: 1.1em;
      font-weight: 500;
      background-color: var(--light-text);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }
    #result .correct-count { color: var(--secondary-color); }
    #result .total-count { color: var(--primary-color); }
    #result .marked-wrong-count { color: var(--danger-color); }

    #warningBox {
  display: none;
  position: fixed;
  top: 20px;                  
  left: 50%;                  
  transform: translateX(-50%);
  background: #f81d1d;
  color: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  font-family: Arial, sans-serif;
  font-size: 14px;
  font-weight: bold;
  z-index: 9999;
}

  </style>
</head>
<body>
<div class="header">Lesen Teil 3: Anwalt</div>
<div class="container">
<div class="left-column">
<div class="quiz-scroll-container">
<!-- Questions A-->
<div class="question-box" data-correct="Sie möchten durch Europa reisen und privat übernachten.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Urlaub auf dem Sofa</h4>
            Im Urlaub zu Hause bleiben und sich auf dem Sofa ausruhen? Das fanden wir zu langweilig! Sofa ja, aber nicht das eigene - so lässt sich unsere Urlaubsidee zusammenfassen. Wenn Sie durch Deutschland, Frankreich, England oder andere europäische Länder reisen und dabei nicht nur Hotelzimmer, sondern ganz normale Leute kennenlernen wollen, dann buchen Sie jetzt bei uns. In unserer Datenbank bieten Menschen aus ganz Europa einen Schlafplatz für eine Person in ihrer Wohnung an - manchmal ein Zimmer, manchmal ein Sofa. Gegen eine geringe Gebühr kann man dort übernachten und das Frühstück ist auch mit dabei. So lernen Sie Länder, Städte, Menschen mal von einer ganz anderen Seite kennen! Infos und Buchung unter www.schlafplätzeineuropa.eu
        </div>
</div>
<!-- Questions B-->
<div class="question-box" data-correct="Ihre Möbel sehen nicht mehr so gut aus. Daran möchten Sie etwas ändern.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Alte Möbel aufarbeiten</h4>
            Viele Menschen hängen an ihren alten Möbeln und möchten sie nicht gegen andere tauschen, obwohl sie die besten Tage schon hinter sich haben. Wir bieten Ihnen für wenig Geld die Restauration Ihrer Möbel an. Mit einer anderen Farbe wirken viele Stücke wieder wie neu! Und falls ein Anstrich nicht reicht, zeigt Ihnen unsere Werkstatt, was noch möglich ist: z.B. neue Türen an Schränken oder neue Bezüge für ihre Sessel und Sofas. Wir kommen gern zu Ihnen nach Hause und machen Ihnen ein kostenloses Angebot! www.schreiner.de
        </div>
</div>
<!-- Questions C-->
<div class="question-box" data-correct="Eine Bekannte malt sehr gut und sucht eine Gelegenheit. anderen ihre Bilder zu zeigen oder sie zu verkaufen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Kunstmarkt</h4>
            In unseren Ausstellungsräumen am Plantanenhof bieten wir an jedem ersten Samstag im Monat jungen Künstlerinnen und Künstlern die Möglichkeit, sich und einige ihrer Werke vorzustellen. Wenn Sie an einer Ausstellung interessiert sind, melden Sie sich bitte spätestens sechs Wochen vor dem gewünschten Termin bei uns an. Aber auch Besucher sind herzlich willkommen! Gegen einen geringen Eintritt erwartet Sie nicht nur neue Kunst, auch Kaffee und Tee werden serviert und natürlich haben Sie auch die Gelegenheit, ein Werk gleich zu kaufen und mitzunehmen. Weitere Informationen und Anmeldung unter: www.galeria.de
        </div>
</div>
<!-- Questions D-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Die eigene Wohnung</h4>
            Für viele ist die eigene Wohnung ein Traum - aber es gibt auch Fragen und Probleme. Wir bieten extra für alle, die zum ersten Mal die eigenen vier Wände beziehen, Infoabende an, in denen sie alles Wichtige zur Haushaltsführung erfahren: Wir bewahrt man Lebensmittel richtig auf? Wie viele Vorräte braucht man? Wie putzt man richtig und welches Mittel ist am besten geeignet? Wie spart man Strom und Heizkosten? Erfahren Sie alles, was wichtig ist, von Omas Spar-Rezepte bis hin zu moderner Küchentechnik. Die Teilnahme ist kostenlos, um Anmeldung wird aber gebeten. AWO Kirchhellen,
            <p>Tel. 0800 / 61619012</p>
</div>
</div>
<!-- Questions E-->
<div class="question-box" data-correct="Ihr Bekannter ist beruflich oft unterwegs und sucht eine Alternative zu Hotels. Es soll dort aber Internetzugang und Frühstück geben.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Unser neues Wohnkonzept</h4>
            Unser Angebot: 1-Zimmerwohnungen mit kompletter Ausstattung, auch Telefon und Internet, außerdem morgens kostenlose Tageszeitung nach Wunsch sowie ein komplettes Frühstück. Alle Wohnungen verfügen über großzügige Arbeitsplätze sowie Drucker, Fax etc. In über 25 Städten buchbar. Außerdem auf Wunsch persönlicher Service (Kurierdienst, Abholung vom Bahnhof/Flughafen etc.). Wir gestalten Ihre Geschäftsreise so angenehm wie möglich - für alle, denen Hotels zu unpersönlich sind. Informationen unter: www.wohnkonzept.de
        </div>
</div>
<!-- Questions F-->
<div class="question-box" data-correct="Sie haben Streit mit ihrem Vermieter wegen der Nebenkosten und möchten sich beraten lassen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Ihr gutes Recht</h4>
            Wenn es um Rechtsfragen geht, kann es schnell teuer werden. Anwalt- und vielleicht auch Gerichtskosten werden fällig - von den Nerven, die man verliert, ganz zu schweigen. Wir bieten eine günstige und zuverlässige alternative in allen Fragen rund um das Mietrecht: Ihre Miete wurde erhöht oder ihr Vermieter repariert Schäden in der Wohnung nicht? Oder haben Sie eine Kündigung von Ihrem Vermieter erhalten, obwohl Sie immer pünktlich die Miete überwiesen haben und auch sonst alles in Ordnung war? Dann vereinbaren Sie einen kostenlosen Beratungstermin bei uns! Wenn wir Sie von unserem Angebot überzeugt haben, können Sie anschließend Mitglied in unserem Verein werden - für nur 75,00 Euro pro Jahr! Mieterschutzbund Brandenburg.          
        </div>
</div>
<!-- Questions G-->
<div class="question-box" data-correct="Sie möchten mit Freunden durch Deutschland reisen und dabei günstig übernachten.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Günstig wohnen in über 70 Städten in Deutschland</h4>
            Wir bieten Ihnen die preiswerte Alternative zum teuren Hotelzimmer: erleben Sie Deutschland und wohnen Sie in über 70 Städten von Flensburg bis Konstanz in einer unserer neuen Pensionen. Wir bieten gemütliche Mehrbettzimmer, einige auch mit Bad. Unsere Häuser sind jeweils zentral gelegen und somit gut zu erreichen. Wir bieten Ihnen zwar keine Mahlzeiten an, aber fast überall in der Nähe unserer Pensionen finden Sie kleine Cafés. Ideal für alle, die günstig reisen möchten! Weitere Informationen und Buchung unter www.pensionen.de
        </div>
</div>
<!-- Questions H-->
<div class="question-box" data-correct="Sie möchten im Urlaub zwar nicht verreisen, aber trotzdem etwas unternehmen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Zuhause bleiben und trotzdem was erleben</h4> 
            Urlaub zu Hause - für viele das schönste Urlaubserlebnis! Wir haben Tipps, wie Sie Ihren Urlaub noch schöner machen können: Veranstaltungstipps (Konzerte, Theater, ...), Kurse (Kochkurse, Singen, Musikinstrumente, ...), Sport und Ausflugtipps für Ihre Region. Ob allein, zu zweit oder mit der ganzen Familie - bei uns finden Sie das Passende! Registrieren Sie sich jetzt und Sie können auswählen, welche Tipps wir Ihnen zuschicken sollen. Natürlich kostenlos! Infos und Registrierung unter www.urlaubzuhause.info
        </div>
</div>
<!-- Questions I-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Guter Rat ist nicht teuer</h4>
            Probleme mit Arbeitgeber oder Vermieter? Hatten Sie einen Unfall und niemand will die Kosten für Ihren Krankenhausaufenthalt zahlen? In solchen Fragen ist es gut, wenn man einen Anwalt an seiner Seite hat - und ihn auch bezahlen kann. Schließen Sie deshalb unsere kostengünstige Rechtsschutzversicherung ab. Wir zahlen den Anwalt und die Gerichtskosten - je nach Tarif komplett oder zum Teil. Informieren Sie sich auch über unsere günstige Familientarife! Rufen Sie an: Thüringer Versicherungen, Tel. 08074 55339. Wichtig: Sie können die Leistungen erst 6 Monate nach Vertragsabschluss in Anspruch nehmen!
          </div>
</div>
<!-- Questions J-->
<div class="question-box" data-correct="Sie möchten ausprobieren, ob Ihnen Zeichnen Spaß macht.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Kunst und Kultur für Einsteiger</h4>
            Nicht nur im Urlaub möchten viele Menschen in der Freizeit Neues ausprobieren. Wir bieten Schnupperkurse zu verschiedenen Freizeitaktivitäten an: Malen war schon immer Ihre Leidenschaft? Sie wollten schon lange probieren, welches Instrument zu Ihnen passt? Dann besuchen Sie einfach unsere Schnupperkurse “Kurs und Kultur für Einsteiger”! Nur 60 Minuten pro Kurs, danach können Sie entscheiden, ob sie einen anderen Kurs ausprobieren möchten oder sich gleich für einen “richtigen” Kurs anmelden wollen. Malerei, Musik, Literatur, Geschichte stehen auf dem Programm. Informieren Sie sich jetzt: Kunst Schule Heckmann, Tel. 0800 444509434
        </div>
</div>
<!-- Questions K-->
<div class="question-box" data-correct="Einem Bekannten wurde die Arbeitsstelle gekündigt, Er möchte bei einem Anwalt um Rat fragen.">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Ihr kompetenter Partner für Rechtsberatung seit über 20 Jahren</h4>
            Ihre kompetente Rechtsberatung in ganz Deutschland! Unsere Anwälte vertreten Ihre Interessen zügig und zuverlässig im Bereich “Arbeit”. Vom Arbeitsvertrag über Probleme am Arbeitsplatz bis hin zu Kündigungen oder auch Problemen bei der Zahlung des Arbeitslosengeldes unterstützen wir Sie sowohl vor Gericht als auch außerhalb. Unsere Erfahrung ist ihr Vorteil. Natürlich ist eine Abrechnung über Ihre Rechtschutzversicherung möglich, sprechen Sie uns einfach an und vereinbaren Sie einen Beratungstermin! Kanzlei Hummel und Schröder, Torstraße 211, 80121 München, Tel. 089 1234567.
        </div>
</div>
<!-- Questions L-->
<div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
<div class="drop-target empty-drop-target" onclick="clickDrop(this)" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
<div class="question-text">
<h4>Immer das richtige Möbel - ob Büro oder Wohnzimmer</h4>
            Egal, ob sie beruflich oft unterwegs sind oder viel Wert auf ein Gemütliches zu Hause legen: Sie wissen, dass es bei Möbeln und weiterer Ausstattung auf die Details ankommt. Wir bieten für jeden Bedarf das Richtige an: Schreibtische mit integriertem Kabel für Telefon- oder Internetverbindungen, Sofas mit praktischer Bettfunktion und farblich passenden Leuchten. Wir bieten auch gebrauchte Möbel günstig an, natürlich nur in bestem Zustand. Schauen Sie sich unsere Ausstellung an!
            <p>Möbel Weber GmbH, Am Langen Hahn 24, 42188 Dortmund.</p>
</div>
</div>
</div>
</div>
<div class="right-column">
<!-- MODIFIED: Added ondragover and ondrop to make this a droppable area -->
<div class="right-column-content" onclick="clearSelected()" ondragover="allowDrop(event)" ondrop="dropOnAnswersContainer(event)">
<!-- Answers -->
<div class="draggable" draggable="true" id="a1" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Einem Bekannten wurde die Arbeitsstelle gekündigt, Er möchte bei einem Anwalt um Rat fragen.
      </div>
<div class="draggable" draggable="true" id="a2" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ihr Bekannter ist beruflich oft unterwegs und sucht eine Alternative zu Hotels. Es soll dort aber Internetzugang und Frühstück geben.
      </div>
<div class="draggable" draggable="true" id="a3" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie reisen gerne und oft und möchten nun Informationen zu einer Reiseversicherung.
      </div>
<div class="draggable" draggable="true" id="a4" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie möchten durch Europa reisen und privat übernachten.
      </div>
<div class="draggable" draggable="true" id="a5" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Eine Bekannte malt sehr gut und sucht eine Gelegenheit. anderen ihre Bilder zu zeigen oder sie zu verkaufen.
      </div>
<div class="draggable" draggable="true" id="a6" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie möchten im Urlaub zwar nicht verreisen, aber trotzdem etwas unternehmen.
      </div>
<div class="draggable" draggable="true" id="a7" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie haben Streit mit ihrem Vermieter wegen der Nebenkosten und möchten sich beraten lassen.
      </div>
<div class="draggable" draggable="true" id="a8" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie möchten ausprobieren, ob Ihnen Zeichnen Spaß macht.
      </div>
<div class="draggable" draggable="true" id="a9" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Ihre Möbel sehen nicht mehr so gut aus. Daran möchten Sie etwas ändern.
      </div>
<div class="draggable" draggable="true" id="a10" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
<input class="wrong-flag" onclick="event.stopPropagation()" type="checkbox"/> Sie möchten mit Freunden durch Deutschland reisen und dabei günstig übernachten.
      </div>
</div>
</div>
</div>
<div class="button-container">
<button class="quiz-button" id="submitQuizButton">
<i class="fas fa-paper-plane"></i> Abschicken
    </button>
<button class="quiz-button secondary" id="resetQuizButton">
<i class="fas fa-redo"></i> Zurücksetzen
    </button>
<!-- Changed to <a> tag for navigation, href to a generic "index.html" or "#" -->
<a class="quiz-button secondary" href="../index2.html" id="homeButton" role="button">
<i class="fas fa-home"></i> Startseite
    </a>
</div>
<div id="result"></div>
<script>
  let selectedAnswer = null;
  const rightColumnContent = document.querySelector(".right-column-content");
  const originalAnswerOrder = Array.from(rightColumnContent.querySelectorAll('.draggable')); // Store initial order for reset

  // MODIFIED: allowDrop to correctly identify parent droppable container
  function allowDrop(ev) {
    ev.preventDefault();
    let droppableContainer = ev.target;
    // Traverse up to find the actual droppable container (.drop-target or .right-column-content)
    while (droppableContainer && droppableContainer !== document.body &&
           !droppableContainer.classList.contains("drop-target") &&
           !droppableContainer.classList.contains("right-column-content")) {
        droppableContainer = droppableContainer.parentElement;
    }

    if (droppableContainer && (droppableContainer.classList.contains("drop-target") || droppableContainer.classList.contains("right-column-content"))) {
        droppableContainer.classList.add("drag-over");
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    ev.target.classList.add("dragging");
  }

  document.addEventListener('dragleave', function(event) {
    if (event.target.classList && (event.target.classList.contains("drop-target") || event.target.classList.contains("right-column-content"))) {
        if (!event.target.contains(event.relatedTarget) && event.target !== event.relatedTarget) {
             event.target.classList.remove("drag-over");
        } else if (event.relatedTarget === null) { 
            event.target.classList.remove("drag-over");
        }
    }
  }, false);
  
  document.addEventListener('dragend', function(event) {
    if (event.target.classList && event.target.classList.contains('draggable')) {
      event.target.classList.remove('dragging');
    }
    document.querySelectorAll('.drop-target.drag-over, .right-column-content.drag-over').forEach(el => {
        el.classList.remove('drag-over');
    });
  });

  // MODIFIED: drop function for question slots
  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    let dropTarget = ev.target;

    while (dropTarget && !dropTarget.classList.contains("drop-target")) {
        dropTarget = dropTarget.parentElement;
    }
    
    if (!dropTarget || !draggedEl) return;

    dropTarget.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    const currentAnswerInTarget = dropTarget.querySelector(".draggable");
    if (currentAnswerInTarget && currentAnswerInTarget !== draggedEl) {
      rightColumnContent.appendChild(currentAnswerInTarget);
      showCheckbox(currentAnswerInTarget);
    }
    
    dropTarget.innerHTML = ""; 
    dropTarget.appendChild(draggedEl);
    hideCheckbox(draggedEl);
    updateDropTargetState(dropTarget);

    if (originalParentOfDraggedEl &&
        originalParentOfDraggedEl.classList.contains("drop-target") &&
        originalParentOfDraggedEl !== dropTarget) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }

  // NEW: Function to handle drops onto the answers container
  function dropOnAnswersContainer(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    const answersContainer = ev.currentTarget; 

    if (!draggedEl || !answersContainer) return;

    answersContainer.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    answersContainer.appendChild(draggedEl);
    showCheckbox(draggedEl);

    if (originalParentOfDraggedEl && originalParentOfDraggedEl.classList.contains("drop-target")) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }


  function hideCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "none";
  }

  function showCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "inline-block";
  }

  function selectAnswer(el, event) {
    event.stopPropagation(); 
    if (selectedAnswer === el) { 
      el.classList.remove("selected");
      selectedAnswer = null;
    } else {
      if (selectedAnswer) selectedAnswer.classList.remove("selected");
      selectedAnswer = el;
      el.classList.add("selected");
    }
  }

  // MODIFIED: clickDrop function
  function clickDrop(targetDropzone) {
    if (selectedAnswer) {
      const originalParentOfSelectedAnswer = selectedAnswer.parentElement;

      const currentAnswerInDropzone = targetDropzone.querySelector(".draggable");
      if (currentAnswerInDropzone && currentAnswerInDropzone !== selectedAnswer) {
        rightColumnContent.appendChild(currentAnswerInDropzone);
        showCheckbox(currentAnswerInDropzone);
      }
      
      targetDropzone.innerHTML = ""; 
      targetDropzone.appendChild(selectedAnswer);
      hideCheckbox(selectedAnswer);
      updateDropTargetState(targetDropzone);

      if (originalParentOfSelectedAnswer &&
          originalParentOfSelectedAnswer.classList.contains("drop-target") &&
          originalParentOfSelectedAnswer !== targetDropzone) {
          updateDropTargetState(originalParentOfSelectedAnswer);
      }

      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function clearSelected() {
    if (selectedAnswer) {
      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function updateDropTargetState(dropTarget) {
    if (!dropTarget || !dropTarget.classList.contains('drop-target')) return;
    
    if (dropTarget.querySelector(".draggable")) {
      dropTarget.classList.remove("empty-drop-target");
    } else {
      dropTarget.classList.add("empty-drop-target");
    }
  }

  function getDraggableText(draggableElement) {
    const clone = draggableElement.cloneNode(true);
    const checkbox = clone.querySelector('.wrong-flag');
    if (checkbox) {
        checkbox.remove();
    }
    return clone.textContent.trim();
  }

  function submitQuiz() {
    let total = 0, correct = 0;
    document.querySelectorAll('.question-box').forEach((box) => {
      total++;
      const correctAnswerText = box.getAttribute("data-correct").trim();
      const dropTarget = box.querySelector(".drop-target");
      const droppedDraggable = dropTarget.querySelector(".draggable");
      
      dropTarget.classList.remove("correct", "incorrect"); 

      if (droppedDraggable) { 
        const selectedText = getDraggableText(droppedDraggable); 
        if (correctAnswerText === "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        } else {
          if (selectedText === correctAnswerText) {
            dropTarget.classList.add("correct");
            correct++;
          } else {
            dropTarget.classList.add("incorrect");
          }
        }
      } else { 
        if (correctAnswerText !== "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        }
      }
      updateDropTargetState(dropTarget); 
    });

    let wrongMarkedCorrect = 0, wrongMarkedTotal = 0;
    rightColumnContent.querySelectorAll('.draggable').forEach((answerEl) => {
      const text = getDraggableText(answerEl); 
      const checkbox = answerEl.querySelector('.wrong-flag');
      
      const isACorrectAnswerOptionForAnyQuestion = Array.from(document.querySelectorAll('.question-box'))
        .some(box => {
            const qCorrectText = box.getAttribute('data-correct').trim();
            return qCorrectText !== "__NO_CORRECT_ANSWER__" && qCorrectText === text;
        });
      
      if (!isACorrectAnswerOptionForAnyQuestion) { 
        wrongMarkedTotal++; 
        if (checkbox.checked) {
          wrongMarkedCorrect++; 
        }
      }
    });

    const questionsWithNoAnswer = Array.from(document.querySelectorAll('.question-box'))
                                      .filter(box => box.getAttribute('data-correct').trim() === "__NO_CORRECT_ANSWER__").length;
    const scorableTotal = total - questionsWithNoAnswer;


    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML =
      `<span class="correct-count">✅ ${correct}</span> von <span class="total-count">${scorableTotal}</span> bewertbaren Fragen richtig. | ` + 
      `<span class="marked-wrong-count">🚫 Falsch-Antworten korrekt markiert: ${wrongMarkedCorrect}</span> von ${wrongMarkedTotal}.`;
  }

  function resetQuiz() {
    document.querySelectorAll('.drop-target').forEach(dt => {
        const draggable = dt.querySelector('.draggable');
        if (draggable) {
            rightColumnContent.appendChild(draggable); 
            showCheckbox(draggable); 
        }
        dt.innerHTML = ''; 
        dt.classList.remove('correct', 'incorrect'); 
        updateDropTargetState(dt); 
    });

    rightColumnContent.innerHTML = ''; 
    originalAnswerOrder.forEach(draggable => {
        rightColumnContent.appendChild(draggable); 
        draggable.classList.remove('selected', 'dragging'); 
        showCheckbox(draggable); 
        const checkbox = draggable.querySelector('.wrong-flag');
        if (checkbox) checkbox.checked = false; 
    });
    
    if (selectedAnswer) {
      selectedAnswer.classList.remove('selected');
      selectedAnswer = null;
    }

    document.getElementById("result").innerHTML = ""; 
  }

  document.getElementById('submitQuizButton').addEventListener('click', submitQuiz);
  document.getElementById('resetQuizButton').addEventListener('click', resetQuiz);

  document.querySelectorAll('.drop-target').forEach(updateDropTargetState);
</script>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-client.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Auth.requireExamAccess('B2');
        });
    </script>
    
</body></html>
