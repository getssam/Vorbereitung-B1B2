<html lang="en"><head>
<meta charset="UTF-8"/>
<title>Wilkommen</title>
<style>
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      background-color: #f0f2f5; /* Soft Grey Background */
      display: flex;
      flex-direction: column; /* Align items vertically */
      justify-content: center;
      align-items: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      position: relative; /* Needed for positioning the logout button */
    }

    .logout-button {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 10px 20px;
      background-color: #d9534f; /* A slightly softer red */
      color: white;
      text-decoration: none;
      border-radius: 20px;
      font-weight: bold;
      transition: background-color 0.3s ease, transform 0.3s ease;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
    }

    .logout-button:hover {
      background-color: #c9302c; /* Darker red on hover */
      transform: scale(1.05);
    }

    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    .header h1 {
      color: #333;
      font-size: 5em;
      margin-bottom: 10px;
    }

    .header p {
      color: #666;
      font-size: 1.2em;
    }

    .container {
      display: flex;
      gap: 30px; /* Reduced gap for a tighter look */
    }

    .button {
      width: 220px;
      height: 70px; /* Adjusted height for a more modern feel */
      background-color: #004a99; /* Deep Blue */
      color: white;
      text-align: center;
      line-height: 70px;
      font-size: 22px;
      font-weight: bold;
      text-decoration: none;
      border-radius: 35px; /* Fully rounded corners */
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .button:hover {
      background-color: #c8102e; /* Vibrant Red on hover */
      transform: translateY(-5px); /* Lift effect on hover */
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>
<body>
<!-- This is the logout button -->
<a class="logout-button" href="/logout">Abmelden</a>
<div class="header">
<h1>Willkommen zu unserem Test</h1>
<p>Wir freuen uns, Sie hier zu haben.</p>
</div>
<div class="container">
<a class="button" href="#" onclick="goToDashboard(event)">B1</a>
<a class="button" href="#" onclick="goToDashboard(event)">B2</a>
</div>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-client.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Auth.requireExamAccess('B2');
        });
    </script>
    
<script>
// Smart redirect to dashboard based on referrer or URL parameter
function goToDashboard(event) {
    event.preventDefault();
    
    // Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const level = urlParams.get('level');
    
    if (level === 'B1' || level === 'b1') {
        window.location.href = '/Vorbereitung-B1B2/b1';
        return;
    }
    if (level === 'B2' || level === 'b2') {
        window.location.href = '/Vorbereitung-B1B2/b2';
        return;
    }
    
    // Check referrer
    const referrer = document.referrer;
    if (referrer.includes('/b1') || referrer.includes('B1')) {
        window.location.href = '/Vorbereitung-B1B2/b1';
        return;
    }
    if (referrer.includes('/b2') || referrer.includes('B2')) {
        window.location.href = '/Vorbereitung-B1B2/b2';
        return;
    }
    
    // Default to home
    window.location.href = '/Vorbereitung-B1B2/home';
}

// Auto-detect and update all back buttons on page load
document.addEventListener('DOMContentLoaded', function() {
    const backButtons = document.querySelectorAll('a[href*="index"], a.quiz-button.secondary, a#homeButton, a#homeBtn');
    backButtons.forEach(btn => {
        if (btn.href && (btn.href.includes('index') || btn.textContent.includes('Startseite') || btn.textContent.includes('Zur√ºck'))) {
            btn.href = '#';
            btn.onclick = goToDashboard;
        }
    });
});
</script>
</body></html>
