<html lang="de"><head>
<meta charset="UTF-8"/>
<title>Julian</title>
<style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #e9eaec;
      display: flex;
      justify-content: center;
    }

    .container {
      display: flex;
      max-width: 1400px;
      width: 100%;
      background-color: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .letter {
      flex: 2;
      padding: 30px;
      font-size: 16px;
      line-height: 1.6;
    }

    .blank {
      background-color: #3f6ccf;
      color: white;
      padding: 2px 10px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      min-width: 24px;
      text-align: center;
      display: inline-block;
    }

    .choices {
  flex: 1.5;
  background-color: #f2f3f7;
  padding: 30px 20px;
  overflow-y: auto;
  max-height: 90vh; /* Adjust height as needed */
}

    .question-block {
      margin-bottom: 20px;
    }

    .row-container {
      background-color: #e0e4f3;
      padding: 10px;
      border-radius: 10px;
      margin-top: 6px;
    }

    .options {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .option {
      background-color: white;
      padding: 6px 14px;
      font-size: 14px;
      border-radius: 18px;
      border: 2px solid #ccc;
      cursor: pointer;
      transition: 0.2s ease;
      user-select: none;
      text-align: center;
      flex: 1;
    }

    .option:hover {
      background-color: #e6ebf9;
    }

    .option.selected {
      background-color: #d0defc;
      border-color: #3f6ccf;
      font-weight: bold;
    }

    .option.correct {
      background-color: #c8f7c5;
      border-color: #34a853;
    }

    .option.incorrect {
      background-color: #fbd5d5;
      border-color: #e53935;
    }

    input[type="radio"] {
      display: none;
    }

    .button-wrapper {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}

#checkBtn,
#homeBtn {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  min-width: 200px;
  text-align: center;
  cursor: pointer;
  text-decoration: none;
  font-weight: bold;
}

/* Primary button style */
#checkBtn {
  background-color: #3f6ccf;
  color: white;
}

#checkBtn:hover {
  background-color: #2f56b3;
}

/* Secondary button style */
#homeBtn {
  background-color: #6c757d;
  color: white;
  display: inline-block;
  line-height: 1.6;
}

#homeBtn:hover {
  background-color: #5a6268;
}

#warningBox {
  display: none;
  position: fixed;
  top: 20px;                  
  left: 50%;                  
  transform: translateX(-50%);
  background: #f81d1d;
  color: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  font-family: Arial, sans-serif;
  font-size: 14px;
  font-weight: bold;
  z-index: 9999;
}

  </style>
</head>
<body>
<div class="container">
<div class="letter">
<p>Liebes Julian,</p>
<p>
    Wie geht es dir? Ich hoffe, du hattest eine schöne Reise und <span class="blank" id="blank1">1</span> dich gut erholen.
    Ich <span class="blank" id="blank2">2</span> ja auch gerne mal wieder ans Meer fahren, aber im Moment habe ich leider keine Zeit <span class="blank" id="blank3">3</span> Urlaub. Wie du dir bestimmt vorstellen kannst, war ich in den letzten Wochen vor allem mit meinem Umzug beschäftigt. Du weißt ja, dass ich zuerst ziemlich skeptisch war, Nach so <span class="blank" id="blank4">4</span> Jahren in Berlin konnte ich mir gar nicht mehr vorstellen, mich in einer kleinen Stadt wie Bamberg niederzulassen. Bamberg hat nur rund 77.000 Einwohner, aber langweilig ist es hier trotzdem nicht, wie ich inzwischen festgestellt habe. Mittlerweile fühle ich mich hier sogar richtig wohl. Die Stadt hat wirklich viel zu bieten. Es gibt jahrhundertealte Sehenswürdigkeiten in Hülle und Fülle, und in der Altstadt <span class="blank" id="blank5">5</span> mir besonders die schönen Fachwerkhäuser, die überwiegend aus dem Mittelalter stammen. Ich gehe oft durch die Fußgängerzone, <span class="blank" id="blank6">6</span> dort gibt es viele kleine Läden, Cafés und Restaurants mit typisch fränkischen Spezialitäten. Ich glaube, dir würde es hier auch gefallen. <span class="blank" id="blank7">7</span> du willst, zeige ich dir gerne mal die Stadt. Hättest du vielleicht Lust, mich im nächsten Monat zu besuchen? <span class="blank" id="blank8">8</span> ist bei mir wach der Umzugsstress vorbei. Im Moment steht noch eine große Anzahl nicht <span class="blank" id="blank9">9</span> Kisten in meinem Wohnzimmer, die ausgepackt werden müssen. Mit meiner neuen Wohnung habe ich übrigens auch Glück gehabt, <span class="blank" id="blank10">10</span> sie geräumig und zentral gelegen ist.
    Wir können ja mal telefonieren, dann erzähle ich dir mehr.
    </p>
<p>Liebe Grüße</p>
<p>Anna</p>
</div>
<div class="choices">
<div class="question-block" data-blank="1">
<div><strong>1.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q1" type="radio" value="musstest"/>musstest</label>
<label class="option"><input name="q1" type="radio" value="konntest"/>konntest</label>
<label class="option"><input name="q1" type="radio" value="solltest"/>solltest</label>
</div>
</div>
</div>
<div class="question-block" data-blank="2">
<div><strong>2.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q2" type="radio" value="würde"/>würde</label>
<label class="option"><input name="q2" type="radio" value="werde"/>werde</label>
<label class="option"><input name="q2" type="radio" value="soll"/>soll</label>
</div>
</div>
</div>
<div class="question-block" data-blank="3">
<div><strong>3.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q3" type="radio" value="nach"/>nach</label>
<label class="option"><input name="q3" type="radio" value="um"/>um</label>
<label class="option"><input name="q3" type="radio" value="für"/>für</label>
</div>
</div>
</div>
<div class="question-block" data-blank="4">
<div><strong>4.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q4" type="radio" value="vielen"/>vielen</label>
<label class="option"><input name="q4" type="radio" value="lange"/>lange</label>
<label class="option"><input name="q4" type="radio" value="wenigen"/>wenigen</label>
</div>
</div>
</div>
<div class="question-block" data-blank="5">
<div><strong>5.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q5" type="radio" value="schaut"/>schaut</label>
<label class="option"><input name="q5" type="radio" value="gefallen"/>gefallen</label>
<label class="option"><input name="q5" type="radio" value="finde"/>finde</label>
</div>
</div>
</div>
<div class="question-block" data-blank="6">
<div><strong>6.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q6" type="radio" value="denn"/>denn</label>
<label class="option"><input name="q6" type="radio" value="weil"/>weil</label>
<label class="option"><input name="q6" type="radio" value="obwohl"/>obwohl</label>
</div>
</div>
</div>
<div class="question-block" data-blank="7">
<div><strong>7.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q7" type="radio" value="Wenn"/>Wenn</label>
<label class="option"><input name="q7" type="radio" value="Dass"/>Dass</label>
<label class="option"><input name="q7" type="radio" value="Als"/>Als</label>
</div>
</div>
</div>
<div class="question-block" data-blank="8">
<div><strong>8.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q8" type="radio" value="Dann"/>Dann</label>
<label class="option"><input name="q8" type="radio" value="Wann"/>Wann</label>
<label class="option"><input name="q8" type="radio" value="Während"/>Während</label>
</div>
</div>
</div>
<div class="question-block" data-blank="9">
<div><strong>9.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q9" type="radio" value="ausgeräumt"/>ausgeräumt</label>
<label class="option"><input name="q9" type="radio" value="geschlossen"/>geschlossen</label>
<label class="option"><input name="q9" type="radio" value="vergessen"/>vergessen</label>
</div>
</div>
</div>
<div class="question-block" data-blank="10">
<div><strong>10.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q10" type="radio" value="dass"/>dass</label>
<label class="option"><input name="q10" type="radio" value="damit"/>damit</label>
<label class="option"><input name="q10" type="radio" value="weil"/>weil</label>
</div>
</div>
</div>
<div class="button-wrapper">
<button id="checkBtn">Antworten prüfen</button>
<a href="#" onclick="goToDashboard(event)" id="homeBtn">Zurück zur Startseite</a>
</div>
</div>
</div>
<script>
  const correctAnswers = {
    1: "konntest",
    2: "würde",
    3: "für",
    4: "vielen",
    5: "gefallen",
    6: "denn",
    7: "Wenn",
    8: "Dann",
    9: "ausgeräumt",
    10: "weil"
  };

  document.querySelectorAll('.option input[type="radio"]').forEach(input => {
    input.addEventListener('change', (e) => {
      const label = e.target.closest('label');
      const block = e.target.closest('.question-block');
      const blankId = block.getAttribute('data-blank');
      const blank = document.getElementById('blank' + blankId);

      block.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
      label.classList.add('selected');
      blank.textContent = e.target.value;
    });
  });

  document.getElementById("checkBtn").addEventListener("click", () => {
    document.querySelectorAll('.question-block').forEach(block => {
      const blankId = block.getAttribute('data-blank');
      const selectedInput = block.querySelector('input[type="radio"]:checked');
      const options = block.querySelectorAll('.option');

      options.forEach(opt => opt.classList.remove('correct', 'incorrect'));

      if (selectedInput) {
        const value = selectedInput.value;
        const label = selectedInput.closest('.option');

        if (value === correctAnswers[blankId]) {
          label.classList.add('correct');
        } else {
          label.classList.add('incorrect');

          // Show correct answer
          options.forEach(opt => {
            if (opt.textContent.trim() === correctAnswers[blankId]) {
              opt.classList.add('correct');
            }
          });
        }
      }
    });
  });
</script>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-client.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Auth.requireExamAccess('B2');
        });
    </script>
    
<script>
// Smart redirect to dashboard based on referrer or URL parameter
function goToDashboard(event) {
    event.preventDefault();
    
    // Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const level = urlParams.get('level');
    
    if (level === 'B1' || level === 'b1') {
        window.location.href = '/Vorbereitung-B1B2/b1';
        return;
    }
    if (level === 'B2' || level === 'b2') {
        window.location.href = '/Vorbereitung-B1B2/b2';
        return;
    }
    
    // Check referrer
    const referrer = document.referrer;
    if (referrer.includes('/b1') || referrer.includes('B1')) {
        window.location.href = '/Vorbereitung-B1B2/b1';
        return;
    }
    if (referrer.includes('/b2') || referrer.includes('B2')) {
        window.location.href = '/Vorbereitung-B1B2/b2';
        return;
    }
    
    // Default to home
    window.location.href = '/Vorbereitung-B1B2/home';
}

// Auto-detect and update all back buttons on page load
document.addEventListener('DOMContentLoaded', function() {
    const backButtons = document.querySelectorAll('a[href*="index"], a.quiz-button.secondary, a#homeButton, a#homeBtn');
    backButtons.forEach(btn => {
        if (btn.href && (btn.href.includes('index') || btn.textContent.includes('Startseite') || btn.textContent.includes('Zurück'))) {
            btn.href = '#';
            btn.onclick = goToDashboard;
        }
    });
});
</script>
</body></html>
