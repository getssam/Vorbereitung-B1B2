<html lang="de"><head>
<meta charset="UTF-8"/>
<title>Leon</title>
<style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #e9eaec;
      display: flex;
      justify-content: center;
    }

    .container {
      display: flex;
      max-width: 1400px;
      width: 100%;
      background-color: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .letter {
      flex: 2;
      padding: 30px;
      font-size: 16px;
      line-height: 1.6;
    }

    .blank {
      background-color: #3f6ccf;
      color: white;
      padding: 2px 10px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      min-width: 24px;
      text-align: center;
      display: inline-block;
    }

    .choices {
  flex: 1.5;
  background-color: #f2f3f7;
  padding: 30px 20px;
  overflow-y: auto;
  max-height: 90vh; /* Adjust height as needed */
}

    .question-block {
      margin-bottom: 20px;
    }

    .row-container {
      background-color: #e0e4f3;
      padding: 10px;
      border-radius: 10px;
      margin-top: 6px;
    }

    .options {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .option {
      background-color: white;
      padding: 6px 14px;
      font-size: 14px;
      border-radius: 18px;
      border: 2px solid #ccc;
      cursor: pointer;
      transition: 0.2s ease;
      user-select: none;
      text-align: center;
      flex: 1;
    }

    .option:hover {
      background-color: #e6ebf9;
    }

    .option.selected {
      background-color: #d0defc;
      border-color: #3f6ccf;
      font-weight: bold;
    }

    .option.correct {
      background-color: #c8f7c5;
      border-color: #34a853;
    }

    .option.incorrect {
      background-color: #fbd5d5;
      border-color: #e53935;
    }

    input[type="radio"] {
      display: none;
    }

    .button-wrapper {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}

#checkBtn,
#homeBtn {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  min-width: 200px;
  text-align: center;
  cursor: pointer;
  text-decoration: none;
  font-weight: bold;
}

/* Primary button style */
#checkBtn {
  background-color: #3f6ccf;
  color: white;
}

#checkBtn:hover {
  background-color: #2f56b3;
}

/* Secondary button style */
#homeBtn {
  background-color: #6c757d;
  color: white;
  display: inline-block;
  line-height: 1.6;
}

#homeBtn:hover {
  background-color: #5a6268;
}

#warningBox {
  display: none;
  position: fixed;
  top: 20px;                  
  left: 50%;                  
  transform: translateX(-50%);
  background: #f81d1d;
  color: #ffffff;
  padding: 15px 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  font-family: Arial, sans-serif;
  font-size: 14px;
  font-weight: bold;
  z-index: 9999;
}

  </style>
</head>
<body>
<div class="container">
<div class="letter">
<p><strong>Betreff:</strong> Grüße <span class="blank" id="blank1">1</span> Berlin</p>
<p>Hallo Leon,</p>
<p>vielen Dank für deine letzte Mail aus Peking! Du arbeitest ja jetzt schon seit einem halben Jahr in China – unglaublich, wie schnell die Zeit vergeht. <br/>
      Leider hatte ich in den letzten drei Wochen keine Zeit, dir zu antworten, weil ich viel zu tun hatte. Aber jetzt berichte ich dir, <span class="blank" id="blank2">2</span> alles los war. <br/><br/>
      Also, im Büro haben wir derzeit viel Stress, <span class="blank" id="blank3">3</span> drei Kollegen im Urlaub sind und eine weitere Kollegin seit zwei Wochen krank ist. Jetzt müssen wir mit fünf Leuten die Arbeit erledigen, die sonst neun Leute machen. Ich weiß wirklich nicht, wer diese Urlaubsplanung gemacht hat. Hoffentlich <span class="blank" id="blank4">4</span> das in Zukunft besser organisiert. <br/><br/>
      Am Wochenende waren Carmen und ich dann ein paarmal aus. Wir waren zum Beispiel bei einem Konzert von „Belasco“. Kennst du die Band? Eigentlich war ich an dem Abend ganz schön kaputt und <span class="blank" id="blank5">5</span> am liebsten zuhause geblieben, aber ich hatte Carmen die Karten zum Geburtstag geschenkt. Da <span class="blank" id="blank6">6</span> ich ja schlecht auf dem Sofa sitzen bleiben! Im Nachhinein muss ich sagen: Ein Glück, dass wir zu dem Konzert gegangen sind, <span class="blank" id="blank7">7</span> es war einfach nur super! <br/><br/>
      An den letzten beiden Wochenenden hatten wir dann auch noch Familienfeiern: Erst hatte meine ältere Schwester Geburtstag und hat groß gefeiert, dann hat ein Cousin geheiratet und uns eingeladen, <span class="blank" id="blank8">8</span> war zwar schön, aber auch anstrengend. Ich bin froh, dass wir für die kommenden Wochenenden <span class="blank" id="blank9">9</span> keine Pläne haben. <br/><br/>
      Das war’s erst mal von mir. Melde dich doch wieder, ich freue mich <span class="blank" id="blank10">10</span> deine nächste E-Mail!</p>
</div>
<div class="choices">
<div class="question-block" data-blank="1">
<div><strong>1.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q1" type="radio" value="aus"/>aus</label>
<label class="option"><input name="q1" type="radio" value="von"/>von</label>
<label class="option"><input name="q1" type="radio" value="über"/>über</label>
</div>
</div>
</div>
<div class="question-block" data-blank="2">
<div><strong>2.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q2" type="radio" value="wann"/>wann</label>
<label class="option"><input name="q2" type="radio" value="was"/>was</label>
<label class="option"><input name="q2" type="radio" value="wie"/>wie</label>
</div>
</div>
</div>
<div class="question-block" data-blank="3">
<div><strong>3.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q3" type="radio" value="da"/>da</label>
<label class="option"><input name="q3" type="radio" value="obwohl"/>obwohl</label>
<label class="option"><input name="q3" type="radio" value="wenn"/>wenn</label>
</div>
</div>
</div>
<div class="question-block" data-blank="4">
<div><strong>4.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q4" type="radio" value="ist"/>ist</label>
<label class="option"><input name="q4" type="radio" value="wird"/>wird</label>
<label class="option"><input name="q4" type="radio" value="würde"/>würde</label>
</div>
</div>
</div>
<div class="question-block" data-blank="5">
<div><strong>5.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q5" type="radio" value="bin"/>bin</label>
<label class="option"><input name="q5" type="radio" value="wäre"/>wäre</label>
<label class="option"><input name="q5" type="radio" value="war"/>war</label>
</div>
</div>
</div>
<div class="question-block" data-blank="6">
<div><strong>6.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q6" type="radio" value="konnte"/>konnte</label>
<label class="option"><input name="q6" type="radio" value="sollte"/>sollte</label>
<label class="option"><input name="q6" type="radio" value="musste"/>musste</label>
</div>
</div>
</div>
<div class="question-block" data-blank="7">
<div><strong>7.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q7" type="radio" value="aber"/>aber</label>
<label class="option"><input name="q7" type="radio" value="sondern"/>sondern</label>
<label class="option"><input name="q7" type="radio" value="denn"/>denn</label>
</div>
</div>
</div>
<div class="question-block" data-blank="8">
<div><strong>8.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q8" type="radio" value="Beides"/>Beides</label>
<label class="option"><input name="q8" type="radio" value="Beiden"/>Beiden</label>
<label class="option"><input name="q8" type="radio" value="Beide"/>Beide</label>
</div>
</div>
</div>
<div class="question-block" data-blank="9">
<div><strong>9.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q9" type="radio" value="erst"/>erst</label>
<label class="option"><input name="q9" type="radio" value="noch"/>noch</label>
<label class="option"><input name="q9" type="radio" value="schon"/>schon</label>
</div>
</div>
</div>
<div class="question-block" data-blank="10">
<div><strong>10.</strong></div>
<div class="row-container">
<div class="options">
<label class="option"><input name="q10" type="radio" value="über"/>über</label>
<label class="option"><input name="q10" type="radio" value="für"/>für</label>
<label class="option"><input name="q10" type="radio" value="auf"/>auf</label>
</div>
</div>
</div>
<div class="button-wrapper">
<button id="checkBtn">Antworten prüfen</button>
<a href="#" onclick="goToDashboard(event)" id="homeBtn">Zurück zur Startseite</a>
</div>
</div>
</div>
<script>
  const correctAnswers = {
    1: "aus",
    2: "was",
    3: "da",
    4: "wird",
    5: "wäre",
    6: "konnte",
    7: "denn",
    8: "Beides",
    9: "noch",
    10: "auf"
  };

  document.querySelectorAll('.option input[type="radio"]').forEach(input => {
    input.addEventListener('change', (e) => {
      const label = e.target.closest('label');
      const block = e.target.closest('.question-block');
      const blankId = block.getAttribute('data-blank');
      const blank = document.getElementById('blank' + blankId);

      block.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
      label.classList.add('selected');
      blank.textContent = e.target.value;
    });
  });

  document.getElementById("checkBtn").addEventListener("click", () => {
    document.querySelectorAll('.question-block').forEach(block => {
      const blankId = block.getAttribute('data-blank');
      const selectedInput = block.querySelector('input[type="radio"]:checked');
      const options = block.querySelectorAll('.option');

      options.forEach(opt => opt.classList.remove('correct', 'incorrect'));

      if (selectedInput) {
        const value = selectedInput.value;
        const label = selectedInput.closest('.option');

        if (value === correctAnswers[blankId]) {
          label.classList.add('correct');
        } else {
          label.classList.add('incorrect');

          // Show correct answer
          options.forEach(opt => {
            if (opt.textContent.trim() === correctAnswers[blankId]) {
              opt.classList.add('correct');
            }
          });
        }
      }
    });
  });
</script>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-client.js"></script>
    <script src="../js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Auth.requireExamAccess('B2');
        });
    </script>
    
<script>
// Smart redirect to dashboard based on referrer or URL parameter
function goToDashboard(event) {
    event.preventDefault();
    
    // Check URL parameter first
    const urlParams = new URLSearchParams(window.location.search);
    const level = urlParams.get('level');
    
    if (level === 'B1' || level === 'b1') {
        window.location.href = '/Vorbereitung-B1B2/b1';
        return;
    }
    if (level === 'B2' || level === 'b2') {
        window.location.href = '/Vorbereitung-B1B2/b2';
        return;
    }
    
    // Check referrer
    const referrer = document.referrer;
    if (referrer.includes('/b1') || referrer.includes('B1')) {
        window.location.href = '/Vorbereitung-B1B2/b1';
        return;
    }
    if (referrer.includes('/b2') || referrer.includes('B2')) {
        window.location.href = '/Vorbereitung-B1B2/b2';
        return;
    }
    
    // Default to home
    window.location.href = '/Vorbereitung-B1B2/home';
}

// Auto-detect and update all back buttons on page load
document.addEventListener('DOMContentLoaded', function() {
    const backButtons = document.querySelectorAll('a[href*="index"], a.quiz-button.secondary, a#homeButton, a#homeBtn');
    backButtons.forEach(btn => {
        if (btn.href && (btn.href.includes('index') || btn.textContent.includes('Startseite') || btn.textContent.includes('Zurück'))) {
            btn.href = '#';
            btn.onclick = goToDashboard;
        }
    });
});
</script>
</body></html>
